# 제품 요구 사항 문서(PRD) — 모바일 익명 게시판(MVP)

## 1. 제품 개요

- 제품명: 모바일 익명 게시판
- 비전: 누구나 부담 없이 즉시 소통할 수 있는 완전 익명 모바일 커뮤니티
- 미션: 로그인/닉네임 없이 글을 읽고 쓰고 보고(신고)할 수 있는 최소 기능의 가벼운 게시판을 1주 내 프로토타입으로 제공
- 범위(MVP):
  - 글 작성
  - 글 목록
  - 글 상세
  - 최소 신고 기능
- 플랫폼: 모바일 웹 우선 (Firebase Hosting + Firestore + Cloud Functions)

## 2. 목표 및 목적

- 비즈니스 목표
  - 학습/프로토타입을 1주 내 배포하여 공개 링크로 트래픽/사용성 학습
  - 운영 부담 없이 소규모 트래픽(동시 <100명)을 안정적으로 처리
  - 최소 스팸 방지로 익명 환경에서의 악용 리스크를 통제

- 사용자 목표
  - 즉시 접근(무로그인), 10초 내 글 읽기/쓰기 가능
  - 단순한 UI로 빠르게 최신 글 탐색
  - 부적절한 콘텐츠를 간단하게 신고

- 성공 지표(KPIs)
  - 기술: 최초 페인트 <1.5s, 인터랙티브 <2.5s(4G 기준), 오류율 <1%
  - 사용: 방문 대비 글 작성 전환 ≥3%, 평균 세션당 페이지뷰 ≥2
  - 품질/안전: 1인당 일평균 신고 ≤0.2건, 스팸 차단율 ≥90%

## 3. 타깃 사용자

- 주요 페르소나
  - 익명 방문자: 가입/닉네임 없이 가볍게 소통하려는 모바일 사용자가 대부분
- 특성
  - 모바일 중심(뷰포트 360–430px 폭), 짧은 체류 시간, 간단한 쓰기/읽기 선호
- 사용 시나리오
  - 링크를 통해 접속 → 최신 글 확인 → 관심 글 상세 열람 → 즉시 글 작성 → 문제 글 발견 시 신고

## 4. 사용자 스토리 및 유스케이스

- US1(읽기): 나는 로그인 없이 접속해 최신 글 목록을 빠르게 보고, 관심 글을 터치해 내용을 확인한다.
- US2(작성): 나는 닉네임이나 회원가입 없이 제목/내용만 입력하여 글을 게시한다.
- US3(신고): 나는 부적절한 글을 간단한 이유 선택으로 신고한다.
- US4(탐색): 나는 목록에서 더보기/페이지네이션으로 이전 글들을 이어서 본다.

유저 여정(핵심 플로우)
- 진입(홈/목록) → 상세 → 뒤로가기(목록) → 글쓰기 → CAPTCHA 통과 → 게시 완료(상세 화면으로 이동) → 필요 시 신고

## 5. 기능 요구사항

우선순위: P0(반드시), P1(있으면 좋음), P2(후순위/차기)

### 5.1 글 목록(P0)
- 기능
  - 최신순 목록(작성일 내림차순)
  - 각 아이템: 제목, 내용 앞 2줄 미리보기, 작성 시각(상대시간), 신고수 표시 안 함
  - 페이지네이션: 더보기 버튼 기반(한 번에 20개)
- 제약/정책
  - 익명 전제, 필터/검색 없음(MVP)
- 수락 기준
  - 목록 최초 로드 시 1페이지(20개) 표시
  - 더보기 클릭 시 중복 없이 다음 20개 로드
  - 네트워크 실패 시 재시도 UI 제공
  - 0건일 때 빈 상태 안내 문구 노출

### 5.2 글 상세(P0)
- 기능
  - 제목, 본문, 작성 시각 표시
  - 신고 버튼 노출
- 수락 기준
  - 존재하지 않는 글 접근 시 404 안내 및 목록으로 이동 버튼 제공
  - 새로고침 시 동일 URL로 재접근 가능
  - 신고 성공/실패 토스트 노출

### 5.3 글 작성(P0)
- 기능
  - 입력 필드: 제목(최대 60자), 내용(최대 2,000자)
  - 제출 시 CAPTCHA(보이는 또는 v3) 검증
- 유효성
  - 제목/내용 모두 필수, 길이 제한 준수
  - 금지어 필터(기본 리스트, 클라이언트 선제 검사 + 서버 재검증)
- 수락 기준
  - 입력 누락/초과 시 즉시 검증 메시지
  - 제출 → CAPTCHA 통과 → 서버 생성 성공 시 상세 화면으로 이동
  - 서버 레이트 리밋 초과 시 안내 메시지(“잠시 후 다시 시도”)

### 5.4 신고(P0)
- 기능
  - 신고 사유 선택(스팸/광고, 음란/불쾌감, 불법/권리침해, 기타)
  - 중복 신고 방지: 동일 디바이스/IP는 동일 글에 하루 1회 제한
- 수락 기준
  - 신고 제출 시 CAPTCHA 또는 App Check 검증 후 성공 처리
  - 성공 시 토스트 “신고가 접수되었습니다”
  - 동일 글 재시도 시 제한 안내

### 5.5 이용 안내/고지(P0)
- 기능
  - 상단/하단에 간단한 커뮤니티 가이드라인/면책 고지 링크
- 수락 기준
  - 접근 시 언제든 링크 노출
  - 페이지 내 모달로 확인 가능

### 5.6 성능/안전 보조(P1)
- 기능
  - 클라이언트 측 타이핑 도중 자동 저장 없음(범위 축소)
  - 다크 모드 대응(시스템 설정 준수)
- 수락 기준
  - prefers-color-scheme 적용 시 대비/명도 기준 충족

### 5.7 자가 삭제(작성자)(P2, 차기)
- 기능
  - 작성 직후 10분 내 삭제 가능(로컬 토큰 기반)
- 수락 기준
  - 동일 브라우저에서만 삭제 가능, 만료 후 불가

## 6. 비기능 요구사항

- 성능/확장성
  - 동시 사용자 <100명 기준
  - FCP <1.5s, TTI <2.5s(4G/중급 기기)
  - 목록/상세 API p95 응답 <300ms(서버 측)
- 보안/프라이버시
  - 완전 익명: 계정/닉네임/이메일 수집 없음
  - IP는 서버 레이트 리밋/남용 방지 목적으로만 해시화(pseudonymization) 저장(보존 7일)
  - reCAPTCHA(App Check 병행) 적용
  - Firestore 보안 규칙: Read: 공개, Write: 서버 전용(클라이언트 직접 쓰기 금지)
- 가용성/신뢰성
  - 에러율 <1%, 치명적 장애 시 유지보수 페이지 제공
- 접근성
  - 색 대비 WCAG AA, 폰트 최소 14px, 키보드 포커스 가능
- 법적/운영
  - 커뮤니티 가이드/신고 고지, 저작권/명예훼손/불법물 신고 처리 방침 명시
  - 개인정보 최소 수집 및 쿠키 사용 안내(Analytics)

## 7. 사용자 경험(UI/UX 가이드)

- 디자인 원칙
  - 모바일 우선, 최소 클릭, 즉시성
  - 단순한 리스트형, 화이트 베이스 라이트 UI(+다크 지원)
- 네비게이션
  - 상단: 로고/타이틀, 글쓰기 버튼
  - 본문: 목록(카드형 또는 리스트형), 더보기 버튼
  - 상세: 뒤로가기, 신고, 타이틀/본문/작성시간
- 컴포넌트
  - 목록 아이템: 제목(볼드, 1줄), 본문 프리뷰(최대 2줄), 시간(상대)
  - 글쓰기 폼: 제목(Input), 내용(Textarea, 6–10행), 제출 버튼, CAPTCHA
- 빈/에러 상태
  - 빈 목록: “아직 글이 없습니다. 첫 글을 남겨보세요.”
  - 네트워크 오류: 재시도 버튼
- 마이크로카피
  - 신고: “부적절한 콘텐츠 신고”
  - 레이트리밋: “요청이 많습니다. 잠시 후 다시 시도하세요.”
- 로딩
  - Skeleton UI 사용(목록 3~5개)
- 국제화
  - MVP: 한국어만

## 8. 기술 고려 사항

- 아키텍처
  - 프론트: Firebase Hosting(정적 SPA), GA4
  - 백엔드: Cloud Functions(HTTPS)로 글 작성/신고/레이트리밋/금지어 검증 처리
  - 데이터: Firestore(문서형), 인덱스/페이지네이션 사용
  - 보안: Firebase App Check + reCAPTCHA, Firestore Rules로 읽기만 공개
- 데이터 모델(초안)
  - posts (collection)
    - id: string (auto)
    - title: string (<=60)
    - body: string (<=2000)
    - createdAt: timestamp (server)
    - status: string (“active” | “removed”)
    - reportCount: number (default 0)
  - reports (collection)
    - id: string (auto)
    - postId: string
    - reason: enum(“spam”,”abuse”,”illegal”,”other”)
    - createdAt: timestamp
    - reporterHash: string(SHA256(IP+UA, salt))
  - rateLimits (collection)
    - key: string(IP hash or deviceId)
    - type: “post” | “report”
    - count: number
    - windowEnd: timestamp
- 인덱스/쿼리
  - posts: createdAt desc 인덱스
- 통합/외부 API
  - reCAPTCHA v2 checkbox 또는 v3 + App Check(Web)
  - Google Analytics 4
- 배포/환경
  - dev/prod 분리, CI: GitHub Actions → Firebase Hosting/Functions 배포
- 모니터링/로깅
  - Cloud Logging & Error Reporting, GA4 이벤트(뷰, 작성, 신고, 실패)

## 9. 보안 설계(요약)

- Firestore 보안 규칙(예시)
  - match /databases/{db}/documents {
      match /posts/{id} {
        allow read: if true;
        allow write, update, delete: if false; // 서버 전용
      }
      match /reports/{id} {
        allow read: if false;
        allow write: if false; // 서버 전용
      }
    }
- Functions
  - POST /api/posts/create: 서버에서 CAPTCHA 검증 → 금지어/길이 검증 → 레이트 리밋(예: 30초당 1건, 하루 10건/IP) → Firestore 저장
  - POST /api/reports/create: CAPTCHA/App Check → 중복 신고 방지(동일 reporterHash 하루 1회/글) → reportCount 증가
  - 실 IP 확인: X-Forwarded-For 사용, 해시 저장
- 스팸/남용 방지
  - 클라/서버 이중 검증, 서버 레이트 리밋 우선
  - App Check 강제 및 Origin 체크
- 개인정보
  - PII 저장 금지, 해시 및 TTL(7일) 적용

## 10. 성공 지표 및 측정

- 핵심 KPI
  - Uptime ≥99.5%
  - FCP<1.5s, TTI<2.5s(모바일, p75)
  - 방문자 대비 글 작성 전환 ≥3%
  - 신고 처리 성공률 ≥95% (서버 2xx/요청)
  - 스팸 차단율 ≥90%(차단/전체 시도 비율)
- 분석 이벤트(GA4)
  - page_view(list/detail), post_attempt/success/fail, report_attempt/success/fail, pagination_click

## 11. 우선순위 및 로드맵

- P0(주차 내 구현)
  - 목록/상세/작성/신고
  - 서버 레이트 리밋 + CAPTCHA + App Check
  - 보안 규칙(read-only), 기본 가이드라인, GA4
- P1(차주)
  - 다크 모드, UI 폴리시 강화, 금지어 리스트 관리
- P2(이후)
  - 작성자 자가 삭제(10분), 검색/필터, 관리자 대시보드, 콘텐츠 자동분류

## 12. 수용 기준(기능별 체크리스트)

| 기능 | 수락 기준 |
|---|---|
| 목록 | 20개 로드, 더보기로 추가 20개, 중복 없음, 빈 상태/에러 처리 |
| 상세 | 제목/본문/시간 표시, 존재X 시 404 안내, 새로고침 안전 |
| 작성 | 제목/내용 필수, 길이 제한, CAPTCHA 통과, 서버 레이트리밋 에러 핸들링 |
| 신고 | 사유 선택 필수, 중복 신고 제한, 성공/실패 토스트 |
| 보안 | 클라에서 Firestore 직접 쓰기 불가, Functions만 쓰기 성공 |
| 성능 | FCP/TTI 목표(p75) 충족, 서버 p95 <300ms |
| 접근성 | AA 대비, 최소 폰트, 포커스 링 제공 |

## 13. 위험 평가 및 완화 전략

- 스팸/봇 대량 유입
  - 완화: 서버 레이트 리밋, CAPTCHA, App Check, Origin 검증, IP 해시 블록리스트
- 악성 콘텐츠/법적 리스크
  - 완화: 신고 수 임계치 도달 시 자동 숨김(예: reportCount≥5 시 status=“removed”), 가이드라인 및 신고/문의 링크
- 무인 운영으로 인한 처리 지연
  - 완화: 자동 규칙 우선, 관리자 알림(PagerDuty/Email) P2
- 공개 링크로 인한 트래픽 급증
  - 완화: Firebase 자동 스케일, 정적 캐싱(Hosting), 이미지 미사용(텍스트 중심)

## 14. 추적 매트릭스(요구 → 기능)

- 완전 익명 소통 → 계정/닉네임 미수집, 클라 읽기 전용, 서버 쓰기
- 모바일 우선 → 리스트형 UI, 성능 SLO 모바일 기준
- 핵심 기능(작성/목록/상세/신고) → P0 범위 설정 및 수락 기준 정의
- 스몰 스케일 → Firebase 일체형 선택, 단순 아키텍처
- 최소 스팸 방지 → CAPTCHA+레이트리밋+App Check
- 1주 내 프로토타입 → 범위 축소(검색/댓글/편집 제외), 단순 페이지네이션

## 15. 개발 계획(1주 타임라인)

- D1: 설계 확정, 리포지토리/CI, Firebase 프로젝트/도메인/App Check 설정
- D2: 데이터 모델/보안 규칙/Functions 스캐폴드(CAPTCHA 검증/레이트리밋)
- D3: 목록/상세 UI, Firestore 읽기 연동, 인덱스 구성
- D4: 글쓰기 폼 + 제출 플로우(Functions 연동), 에러/검증 처리
- D5: 신고 플로우, 가이드라인/빈/에러 상태, GA4 이벤트
- D6: 성능/접근성 튜닝, QA, 버그픽스
- D7: 배포, 스모크 테스트, 모니터링 대시보드 점검

## 16. 수명주기/운영

- 배포: main 머지 시 자동 배포(Preview → Prod 승인)
- 모니터링: 에러 레이트, 응답 시간, 레이트리밋 로그
- 데이터 보관: posts 영구, reports 영구, rateLimits 7일 TTL
- 롤백: Hosting 채널/버전 롤백, Functions 이전 버전 재활성화

본 PRD는 수집된 요구(익명 커뮤니티 소통, 모바일 웹 우선, 완전 익명, 글 작성/목록/상세+신고, 소규모 SLO, 최소 스팸방지, Firebase 일체형, 라이트 리스트형, 1주 MVP, 공개 링크)에 기반해 최소 구현 범위를 명확히 정의합니다.